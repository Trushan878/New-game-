<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Game Scoreboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
  <style>
    body {
      background-image: url('1000032064.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      min-height: 100vh;
    }
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      opacity: 0.9;
      animation: confetti-fall 3s linear forwards;
      z-index: 9999;
      border-radius: 2px;
    }
    @keyframes confetti-fall {
      0% { transform: translateY(-100%) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }
    .confetti.color1 { background-color: #f59e0b; }
    .confetti.color2 { background-color: #10b981; }
    .confetti.color3 { background-color: #3b82f6; }

    .congrats-popup {
      position: fixed;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      background: #22c55e;
      color: white;
      padding: 1.5rem 2rem;
      border-radius: 0.75rem;
      font-size: 1.5rem;
      font-weight: 600;
      box-shadow: 0 10px 15px rgba(34, 197, 94, 0.5);
      z-index: 10000;
      opacity: 0;
      animation: fadeInOut 3s forwards;
      white-space: nowrap;
    }
    @keyframes fadeInOut {
      0% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
      10%, 90% { opacity: 1; transform: translateX(-50%) translateY(0); }
      100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
    }
  </style>
</head>
<body class="flex justify-center items-start py-6 overflow-x-hidden">
  <section class="w-[360px] max-w-full bg-white bg-opacity-90 rounded-lg p-6 shadow-lg z-0">
    <h1 class="text-2xl font-bold text-center mb-4">Game Scoreboard</h1>

    <div class="flex gap-2 mb-4">
      <input id="playerName" class="flex-1 border p-2 rounded" placeholder="Enter player name" />
      <button onclick="addPlayer()" class="bg-blue-500 text-white px-4 py-2 rounded">Add</button>
    </div>

    <ul id="playersList" class="mb-4 space-y-2"></ul>

    <div class="mb-4">
      <button onclick="nextGame()" class="bg-green-500 text-white px-4 py-2 rounded w-full">Next Game</button>
    </div>

    <div class="mb-4">
      <button onclick="clearData()" class="bg-red-500 text-white px-4 py-2 rounded w-full">Clear All Data</button>
    </div>

    <div>
      <h2 class="text-lg font-semibold mb-2">Game History</h2>
      <ul id="gameHistory" class="space-y-1 text-sm"></ul>
    </div>
  </section>

  <script>
    const firebaseConfig = {
      databaseURL: "https://your-project.firebaseio.com/" // Replace with your database URL
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const playerInput = document.getElementById('playerName');
    const playersList = document.getElementById('playersList');
    const gameHistory = document.getElementById('gameHistory');

    function renderPlayers(players) {
      playersList.innerHTML = '';
      Object.entries(players || {}).forEach(([id, data]) => {
        const li = document.createElement('li');
        li.className = "bg-gray-100 p-2 rounded flex justify-between items-center";
        li.innerHTML = `
          <span>${data.name}: ${data.points || 0}</span>
          <div class="space-x-1">
            <button onclick="addPoint('${id}')" class="bg-green-500 text-white px-2 py-1 rounded">+1</button>
            <button onclick="removePlayer('${id}')" class="bg-red-500 text-white px-2 py-1 rounded">X</button>
          </div>
        `;
        playersList.appendChild(li);
      });
    }

    function renderHistory(history) {
      gameHistory.innerHTML = '';
      history.forEach((game, i) => {
        const li = document.createElement('li');
        li.textContent = `Game ${i + 1}: ${game}`;
        gameHistory.appendChild(li);
      });
    }

    function addPlayer() {
      const name = playerInput.value.trim();
      if (!name) return;
      const newRef = db.ref('players').push();
      newRef.set({ name, points: 0 });
      playerInput.value = '';
    }

    function addPoint(id) {
      const ref = db.ref(`players/${id}`);
      ref.once('value', snap => {
        const player = snap.val();
        const newPoints = (player.points || 0) + 1;
        ref.update({ points: newPoints });
        db.ref('history').once('value', snap => {
          const games = snap.val() || [];
          games.push(`${player.name} scored`);
          db.ref('history').set(games);
        });
        showCongrats(`${player.name} scored!`);
        triggerConfetti();
      });
    }

    function nextGame() {
      db.ref('history').once('value', snap => {
        const games = snap.val() || [];
        games.push(`Game ${games.length + 1} started`);
        db.ref('history').set(games);
      });
    }

    function clearData() {
      db.ref('players').once('value', snap => {
        const players = snap.val() || {};
        Object.entries(players).forEach(([id, data]) => {
          db.ref(`players/${id}/points`).set(0);
        });
      });
      db.ref('history').set([]);
    }

    function removePlayer(id) {
      db.ref(`players/${id}`).remove();
    }

    function showCongrats(text) {
      const popup = document.createElement('div');
      popup.className = 'congrats-popup';
      popup.textContent = text;
      document.body.appendChild(popup);
      setTimeout(() => popup.remove(), 3000);
    }

    function triggerConfetti() {
      for (let i = 0; i < 20; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti color' + (1 + (i % 3));
        confetti.style.left = Math.random() * 100 + 'vw';
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 3000);
      }
    }

    db.ref('players').on('value', snap => {
      renderPlayers(snap.val());
    });

    db.ref('history').on('value', snap => {
      renderHistory(snap.val() || []);
    });
  </script>
</body>
</html>
